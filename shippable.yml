# Language setting
language: node_js

# Version number
node_js:
  - 0.10

# The path for Xunit to output test reports
env:
  global:
    - XUNIT_FILE=shippable/testresults/result.xml

build:
  ci:
    - echo "$USER"
    - echo "$HOME"
    - sudo docker ps -a
    - EXEC_ID=`sudo docker ps | grep shippable-exec | awk '{print $1}'`
    - sudo docker logs --tail=500 $EXEC_ID
    - sudo docker inspect $EXEC_ID
    #- source ~/.nvm/nvm.sh && nvm install 0.12
    - node --version
    - sudo npm install -g grunt-cli
    - sudo npm install
    - cat Ulysses.txt > /dev/null
    - grunt
    
  on_success:
    - ./node_modules/.bin/istanbul cover grunt -- -u tdd
    - ./node_modules/.bin/istanbul report cobertura --dir  shippable/codecoverage/  

